#!/usr/bin/env bash

set -euo pipefail

base_dir=$(dirname "${BASH_SOURCE[0]}" && pwd)
source "$base_dir/utils.sh"

#--------------------------------#
#    TB2: TextBook ToolBox       #
#--------------------------------#

case "${1:-}" in
  ""|"-i")
    "$base_dir/subcmds/interactive"
    ;;
  "--help"|"-h")
    "$base_dir/subcmds/help"
    ;;
  *)
    if [[ ! -f "$base_dir/subcmds/$1" || -x "$base_dir/subcmds/$1" ]]; then
      error "Unknown subcommand: $1"
      info "Run './tb2 --help' for usage."
      exit 1
    fi
    "$base_dir/subcmds/$1" "${@:2}"
    ;;
esac