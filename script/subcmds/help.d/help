#!/usr/bin/env bash
#? Show tb2 help message(this)

set -euo pipefail


subcmd_dir="$ROOT/subcmds"

. "$ROOT/utils.sh"

info "tb2 - TextBook ToolBox"
log "GitHub automation & textbook builder CLI"
echo

info "USAGE"
log "  tb2 <subcmd> [options]"
echo

info "DESCRIPTION"
log "  tb2 automates GitHub operations for textbook creation."
log "  It manages Books, Chapters, Pages, Issues, Branches, and Projects."
echo

info "SUBCOMMANDS"
for dir in "$subcmd_dir"/*.d; do
  name=$(basename "$dir" | sed 's/\.d$//')
  [ "$name" = "_template" ] && continue
  main_cmd="$dir/$name"
  if [ -f "$main_cmd" ]; then
    desc=$(grep '^#?' "$main_cmd" | sed 's/^#? //' | sed 's/^/      /')
  else
    desc="      (no description)"
  fi
  printf "  %-10s\n%s\n" "$name" "$desc"
done

echo

info "FLAGS"
log "  -h, --help        Show help for a specific subcommand"
log "  -i                Start tb2 in interactive mode"
echo

info "EXAMPLES"
log "  see github.com/techno-tutors/tb2/"
echo
